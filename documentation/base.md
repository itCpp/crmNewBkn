## Информация для БАЗЫ

Данный раздел предназначен для вывода информации в базах.
Группа маршрутов `base` защищена посредником, который сверяет список разрешенных IP адресов с адресом от которого пришёл запрос.
Список пдрсев определяется в переменной env среды `BASE_SERVER_ADDRS`. Адреса необходимо указать через запятую, например:
```sh
BASE_SERVER_ADDRS=127.0.0.1,127.0.0.2
```

В случае несанкционированного доступа, сервер вернет `403` ответ.

### Вывод записей на день
`GET` `/api/base/records`

| Параметр | Тип | Обязательный | Описание |
| ------ | ------ | ------ | ------ |
| `date` | `string` | _Нет_ | Дата в формате `ГГГГ-ММ-ДД`, по умолчанию используется текущая дата |
| `office` | `integer` | _Нет_ | Идентификатор офиса для фильтрации записей (`id` таблицы офисов базы) |

В случае успеха, будет получет объект с записями на указанную дату
```js
{
    "records": [
        {
            "office_icon": "http://example.site/img/logo.jpg",
            "office_name": "Наименование офиса",
            "office_id": "ОФ1",
            "id": 654321,
            "date": "2022-04-05T17:00:00.000000Z",
            "checked": false,
            "address": 4,
            "comment": null,
            "comment_urist": null,
            "client_name": "Агнешка",
            "pin": "1000",
            "theme": "Авторское право"
        }
    ],
    "offcies": [
        {
            "office_icon": "http://example.site/img/logo.jpg",
            "office_name": "Наименование офиса",
            "office_id": "ОФ1",
            "records": 1,
            "address": 4
        }
    ]
}
```

##### Записи
Массив `records` содержит объекты записей, отсортированных в порядке возрастания даты записи.

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `address` | `integer` | Идентификатор офиса |
| `checked` | `boolean` | В случае успеха - подтвержденная запись |
| `comment` | `null` `string` | Комментарий клиента или суть обащения |
| `comment_urist` | `null` `string` | Комментарий для юриста |
| `client_name` | `null` `string` | Имя клиента |
| `date` | `string` | Дата и время записи |
| `id` | `integer` | Идентификатор заявки колл-центра |
| `office_icon` | `null` `string` | URL адрес иконки офиса |
| `office_id` | `null` `string` | Текстовый идентификатор офиса |
| `office_name` | `null` `string` | Наименование офиса |
| `pin` | `null` `string` | Персональный идентификационный номер оператора колл-центра |
| `theme` | `null` `string` | Тематика заявки |

##### Офисы
Массив `offices` содержит информацию о количестве записей по каждому офису

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `address` | `integer` | Идентификатор офиса |
| `office_icon` | `null` `string` | URL адрес иконки офиса |
| `office_id` | `null` `string` | Текстовый идентификатор офиса |
| `office_name` | `null` `string` | Наименование офиса |
| `records` | `integer` | Количество записей |