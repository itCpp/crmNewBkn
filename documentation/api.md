# API

### Обработка входящего события
`POST` `GET` `/api/events/{type?}`

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `type` | `string` | Тип входящего события `call_asterisk`, `callDetailRecord`, `coming` |
| `text` | `int` | Идентификатор входящего события текстовой заявки |
| `call` | `int` | Идентификатор входящего события звонка |

##### Обработка входящего события внутреннего Asterisk
`POST` `GET` `/api/events/call_asterisk`

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `call_id` | `int` | Идентификатор входящего события звонка |

##### Обработка входящего события окончания разговора
`POST` `GET` `/api/events/callDetailRecord`

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `event_id` | `int` | Идентификатор входящего события звонка |
| `phone` | `string` | Номер телефона |
| `phone` | `string` | Номер телефона |
| `path` | `string` | Путь до расположения файла аудиозаписи |
| `call_at` | `string` | Время звонка |
| `type` | `string` | Тип звонка, исходящий или входящий |
| `duration` | `int` | Длина аудио |

##### Установка статуса прихода для заявки
`POST` `GET` `/api/events/coming`

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `id` | `int` | Номер заявки |

### Получить номер телефона через идентификатор
`POST` `GET` `/api/getNumberFromId`

Получает номер телефона в формате `89001234567` по идентификатору заявки и клиента.
Для заявки используется связка номера заявки и номера клинета в формате `+123456s654321`, для получение номера из договора, необходимо передать значение `+7000d0`, где `7000` - номер договора и `0` - порядковый номер расположения номера телефона в списке номеров

| Параметр | Тип | Описание |
| ------ | ------ | ------ |
| `number` | `string` | Идентификатор заявки и клиента |
